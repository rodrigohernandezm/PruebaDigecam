<!DOCTYPE html>
<html lang="es">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1648026384334176"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QF0050DMP2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-QF0050DMP2');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prueba DIGECAM</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
    .container { max-width: 600px; margin: auto; padding: 20px; }
    .ad { width: 100%; height: 100px; margin: 10px auto; background: #ddd; text-align: center; line-height: 100px; }
    .question { margin-bottom: 20px; text-align: left; }
    .result { font-size: 1.2em; margin-top: 20px; }
    button { padding: 10px 20px; margin-top: 20px; }
    .correct-answer { color: green; }
    .wrong-answer { color: red; }
    img { max-width: 100%; height: auto; margin: 10px 0; }
  </style>
</head>
<body>
  <div class="ad">Publicidad</div>
  <div class="container">
    <h1>Prueba de la DIGECAM</h1>
    <img id="quiz-image" src="" alt="Imagen del examen">
    <form id="quiz-form"></form>
    <button id="submit">Calificar</button>
    <div id="results" class="result"></div>
    <button id="restart" style="display: none;">Reiniciar</button>
  </div>
  <div class="ad">Publicidad</div>

  <script>
const images = [
  "https://github.com/usuario/repositorio/arma1.jpg",
  "https://github.com/usuario/repositorio/arma2.jpg"
];

const series = [
  {
    name: "Serie 1",
    questions: [
      {
        question: "El Ejército de Guatemala podrá hacer uso de las armas necesarias para la defensa interna y externa del país...",
        options: ["Verdadero", "Falso"],
        answer: 0
      },
      {
        question: "¿Cómo se clasifican las armas de fuego?",
        options: [
          "Armas cortas y largas",
          "Armas bélicas, de uso individual, deportivas, de uso civil",
          "Armas reconocidas internacionalmente por instituciones deportivas"
        ],
        answer: 1
      },
      // Más preguntas aquí...
    ]
  },
  {
    name: "Serie 2",
    questions: [
      {
        question: "Herramienta diseñada para lanzar un proyectil utilizando la energía liberada por la combustión del propelente.",
        options: ["Percutor", "Arma de fuego", "Proyectil", "Calibre"],
        answer: 1
      },
      {
        question: "Golpea el fulminante del cartucho, lo que provoca la ignición del cartucho.",
        options: ["Percutor", "Aguja", "Arma de fuego", "Proyectil"],
        answer: 0
      },
      // Más preguntas aquí...
    ]
  },
  {
    name: "Serie 3 - Imágenes",
    questions: [
      {
        question: "¿Qué tipo de arma se muestra en la imagen?",
        options: ["Pistola", "Rifle", "Escopeta"],
        answer: 0
      },
      {
        question: "¿En qué situación se utilizaría el arma de la imagen?",
        options: ["Caza deportiva", "Defensa personal", "Uso bélico"],
        answer: 1
      }
    ]
  }
];

const quizForm = document.getElementById("quiz-form");
const submitButton = document.getElementById("submit");
const resultsDiv = document.getElementById("results");
const restartButton = document.getElementById("restart");
const quizImage = document.getElementById("quiz-image");

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function loadQuiz() {
  quizForm.innerHTML = "";
  resultsDiv.innerHTML = "";
  submitButton.style.display = "inline";
  restartButton.style.display = "none";

  // Mostrar imagen aleatoria
  const randomImage = images[Math.floor(Math.random() * images.length)];
  quizImage.src = randomImage;

  series.forEach((serie, serieIndex) => {
    const serieHeader = document.createElement("h2");
    serieHeader.textContent = serie.name;
    quizForm.appendChild(serieHeader);

    shuffle(serie.questions).forEach((q, index) => {
      const questionElement = document.createElement("div");
      questionElement.classList.add("question");

      const questionText = `<p>${index + 1}. ${q.question}</p>`;
      const dropdown = document.createElement("select");
      dropdown.name = `serie-${serieIndex}-question-${index}`;

      const defaultOption = document.createElement("option");
      defaultOption.value = "";
      defaultOption.textContent = "Seleccione una respuesta";
      defaultOption.disabled = true;
      defaultOption.selected = true;
      dropdown.appendChild(defaultOption);

      q.options.forEach((opt, i) => {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = opt;
        dropdown.appendChild(option);
      });

      questionElement.innerHTML = questionText;
      questionElement.appendChild(dropdown);
      quizForm.appendChild(questionElement);
    });
  });
}

function gradeQuiz() {
  let overallScore = 0;
  let resultsHTML = "<h2>Resultados</h2>";

  series.forEach((serie, serieIndex) => {
    let score = 0;
    resultsHTML += `<h3>${serie.name}</h3>`;

    serie.questions.forEach((q, index) => {
      const selectedOption = quizForm[`serie-${serieIndex}-question-${index}`].value;
      if (selectedOption === "" || selectedOption === undefined) {
        resultsHTML += `<p>${index + 1}. ${q.question} - <span class="wrong-answer">Sin responder</span>. Respuesta correcta: <span class="correct-answer">${q.options[q.answer]}</span></p>`;
      } else if (parseInt(selectedOption) === q.answer) {
        score++;
        overallScore++;
        resultsHTML += `<p>${index + 1}. ${q.question} - <span class="correct-answer">Correcto</span></p>`;
      } else {
        resultsHTML += `<p>${index + 1}. ${q.question} - <span class="wrong-answer">Incorrecto</span>. Respuesta correcta: <span class="correct-answer">${q.options[q.answer]}</span></p>`;
      }
    });

    resultsHTML += `<p>Puntuación de ${serie.name}: ${score}/${serie.questions.length}</p>`;
  });

  resultsHTML += `<p>Puntuación total: ${overallScore}/${series.reduce((sum, s) => sum + s.questions.length, 0)}</p>`;
  resultsDiv.innerHTML = resultsHTML;

  submitButton.style.display = "none";
  restartButton.style.display = "inline";
}

submitButton.addEventListener("click", (e) => {
  e.preventDefault();
  gradeQuiz();
});

restartButton.addEventListener("click", loadQuiz);

loadQuiz();
  </script>
</body>
</html>
