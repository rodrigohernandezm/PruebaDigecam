<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Meta tags, título y estilos (igual que antes) -->
</head>
<body>
  <div class="ad">Publicidad</div>
  <div class="container">
    <!-- Header y tabs (igual que antes) -->
  </div>
  <div class="ad">Publicidad</div>

  <script>
    // Banco de preguntas para Serie 1 (con artículos)
    const bancoPreguntasSerie1 = [
      {
        question: "¿Cuál es el objetivo principal de la Ley de Armas y Municiones?",
        options: ["Regular la tenencia y portación de armas", "Prohibir el uso de armas", "Fomentar la venta de armas", "Permitir armas bélicas a civiles"],
        answer: 0,
        articulo: "Artículo 2"
      },
      // ... (resto de preguntas de Serie 1 con 'articulo')
    ];

    // Serie 2 original (sin artículos)
    const serie2 = [
      {
        question: "Herramienta diseñada para lanzar un proyectil utilizando la energía liberada por la combustión del propelente.",
        options: ["Percutor", "Arma de fuego", "Proyectil", "Calibre"],
        answer: 1
      },
      // ... (resto de preguntas originales de Serie 2)
    ];

    const quizForm = document.getElementById("quiz-form");
    const submitButton = document.getElementById("submit");
    const resultsDiv = document.getElementById("results");
    const restartButton = document.getElementById("restart");

    function getRandomQuestions() {
      const preguntasSerie1 = bancoPreguntasSerie1.sort(() => 0.5 - Math.random()).slice(0, 25);
      return {
        serie1: preguntasSerie1,
        serie2: serie2 // Serie 2 fija
      };
    }

    function loadQuiz() {
      quizForm.innerHTML = "";
      resultsDiv.innerHTML = "";
      submitButton.style.display = "inline";
      restartButton.style.display = "none";

      const { serie1, serie2 } = getRandomQuestions();

      // Cargar Serie 1
      const serie1Header = document.createElement("h2");
      serie1Header.textContent = "Serie 1";
      quizForm.appendChild(serie1Header);
      serie1.forEach((q, index) => loadQuestion(q, index, "serie1"));

      // Cargar Serie 2
      const serie2Header = document.createElement("h2");
      serie2Header.textContent = "Serie 2";
      quizForm.appendChild(serie2Header);
      serie2.forEach((q, index) => loadQuestion(q, index, "serie2"));
    }

    function loadQuestion(q, index, serie) {
      const questionElement = document.createElement("div");
      questionElement.classList.add("question");
      questionElement.innerHTML = `<p>${index + 1}. ${q.question}</p>`;

      q.options.forEach((opt, i) => {
        questionElement.innerHTML += `
          <label>
            <input type="radio" name="${serie}-question-${index}" value="${i}"> ${opt}
          </label><br>`;
      });

      quizForm.appendChild(questionElement);
    }

    function gradeQuiz() {
      const { serie1, serie2 } = getRandomQuestions();
      let score = 0;
      let incorrectArticles = [];

      // Calificar Serie 1 (con artículos)
      serie1.forEach((q, index) => {
        const selectedOption = quizForm[`serie1-question-${index}`].value;
        if (parseInt(selectedOption) === q.answer) score++;
        else if (selectedOption !== "") incorrectArticles.push(q.articulo);
      });

      // Calificar Serie 2 (sin artículos)
      serie2.forEach((q, index) => {
        const selectedOption = quizForm[`serie2-question-${index}`].value;
        if (parseInt(selectedOption) === q.answer) score++;
      });

      // Mostrar resultados
      let resultsHTML = `
        <h2>Resultados</h2>
        <h3>Puntaje total: ${score} / ${serie1.length + serie2.length}</h3>
      `;

      if (incorrectArticles.length > 0) {
        resultsHTML += `
          <h3>Artículos a repasar (Serie 1):</h3>
          <ul>${[...new Set(incorrectArticles)].map(a => `<li>${a}</li>`).join("")}</ul>
        `;
      }

      resultsDiv.innerHTML = resultsHTML;
      submitButton.style.display = "none";
      restartButton.style.display = "inline";
    }

    function restartQuiz() {
      loadQuiz();
    }

    submitButton.addEventListener("click", gradeQuiz);
    restartButton.addEventListener("click", restartQuiz);
    loadQuiz();
  </script>
</body>
</html>
