<!DOCTYPE html>
<html lang="es">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1648026384334176"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prueba DIGECAM</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
    .container { max-width: 600px; margin: auto; padding: 20px; }
    .ad { width: 100%; height: 100px; margin: 10px auto; background: #ddd; text-align: center; line-height: 100px; }
    .question { margin-bottom: 20px; text-align: left; }
    .result { font-size: 1.2em; margin-top: 20px; }
    button { padding: 10px 20px; margin-top: 20px; }
    .correct-answer { color: green; }
    .wrong-answer { color: red; }
  </style>
</head>
<body>
  <div class="ad">Publicidad</div>
  <div class="container">
    <h1>Prueba de la DIGECAM</h1>
    <form id="quiz-form"></form>
    <button id="submit">Calificar</button>
    <div id="results" class="result"></div>
    <button id="restart" style="display: none;">Reiniciar</button>
  </div>
  <div class="ad">Publicidad</div>

  <script>
const series = [
  {
    name: "Serie 1",
    questions: [
      {
        question: "El Ejército de Guatemala podrá hacer uso de las armas necesarias para la defensa interna y externa del país...",
        options: ["Verdadero", "Falso"],
        answer: 0
      },
      {
        question: "¿Cómo se clasifican las armas de fuego?",
        options: [
          "Armas cortas y largas",
          "Armas bélicas, de uso individual, deportivas, de uso civil",
          "Armas reconocidas internacionalmente por instituciones deportivas"
        ],
        answer: 1
      },
      {
        question: "El agente de seguridad privada tiene permitido desarmar su arma durante su servicio...",
        options: ["Verdadero", "Falso"],
        answer: 1
      }
    ]
  },
  {
    name: "Serie 2",
    questions: [
      {
        question: "HERRAMIENTA DISEÑADA PARA LANZAR UN PROYECTIL UTILIZANDO LA ENERGIA LIBERADA POR LA COMBUSTION DEL PROPELENTE.",
        options: ["Respuesta 1", "Respuesta 2", "Respuesta 3", "Respuesta 4"],
        answer: 0
      },
      {
        question: "GOLPEA EL FULMINANTE DEL CARTUCHO, POR LO QUE PROBOCA LA IGNICION DEL CARTUCHO...",
        options: ["Respuesta 2", "Respuesta 3", "Respuesta 4", "Respuesta 5"],
        answer: 1
      },
      {
        question: "CORRESPONDE A LA MEDIDIA DEL DIAMETRO DEL CAÑON DEL ARMA...",
        options: ["Respuesta 4", "Respuesta 5", "Respuesta 6", "Respuesta 7"],
        answer: 1
      }
    ]
  }
];

const quizForm = document.getElementById("quiz-form");
const submitButton = document.getElementById("submit");
const resultsDiv = document.getElementById("results");
const restartButton = document.getElementById("restart");

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function loadQuiz() {
  quizForm.innerHTML = "";
  resultsDiv.innerHTML = "";
  submitButton.style.display = "inline";
  restartButton.style.display = "none";

  series.forEach((serie, serieIndex) => {
    const serieHeader = document.createElement("h2");
    serieHeader.textContent = serie.name;
    quizForm.appendChild(serieHeader);

    shuffle(serie.questions).forEach((q, index) => {
      const questionElement = document.createElement("div");
      questionElement.classList.add("question");

      const questionText = `<p>${index + 1}. ${q.question}</p>`;

      if (serieIndex === 0) { // Serie 1: Radio buttons
        const options = q.options
          .map(
            (opt, i) =>
              `<label><input type="radio" name="serie-${serieIndex}-question-${index}" value="${i}"> ${opt}</label><br>`
          )
          .join("");
        questionElement.innerHTML = questionText + options;
      } else if (serieIndex === 1) { // Serie 2: Dropdown list
        const dropdown = document.createElement("select");
        dropdown.name = `serie-${serieIndex}-question-${index}`;

        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "Seleccione una respuesta";
        defaultOption.disabled = true;
        defaultOption.selected = true;
        dropdown.appendChild(defaultOption);

        q.options.forEach((opt, i) => {
          const option = document.createElement("option");
          option.value = i;
          option.textContent = opt;
          dropdown.appendChild(option);
        });

        questionElement.innerHTML = questionText;
        questionElement.appendChild(dropdown);
      }

      quizForm.appendChild(questionElement);
    });
  });
}

function gradeQuiz() {
  let overallScore = 0;
  let resultsHTML = "<h2>Resultados</h2>";

  series.forEach((serie, serieIndex) => {
    let score = 0;
    resultsHTML += `<h3>${serie.name}</h3>`;

    serie.questions.forEach((q, index) => {
      const selectedOption = quizForm[`serie-${serieIndex}-question-${index}`].value;
      if (selectedOption === "" || selectedOption === undefined) {
        resultsHTML += `<p>${index + 1}. ${q.question} - <span class="wrong-answer">Sin responder</span>. Respuesta correcta: <span class="correct-answer">${q.options[q.answer]}</span></p>`;
      } else if (parseInt(selectedOption) === q.answer) {
        score++;
        overallScore++;
        resultsHTML += `<p>${index + 1}. ${q.question} - <span class="correct-answer">Correcto</span></p>`;
      } else {
        resultsHTML += `<p>${index + 1}. ${q.question} - <span class="wrong-answer">Incorrecto</span>. Respuesta correcta: <span class="correct-answer">${q.options[q.answer]}</span></p>`;
      }
    });

    resultsHTML += `<p>Puntuación de ${serie.name}: ${score}/${serie.questions.length}</p>`;
  });

  resultsHTML += `<p>Puntuación total: ${overallScore}/${series.reduce((sum, s) => sum + s.questions.length, 0)}</p>`;
  resultsDiv.innerHTML = resultsHTML;

  submitButton.style.display = "none";
  restartButton.style.display = "inline";
}

submitButton.addEventListener("click", (e) => {
  e.preventDefault();
  gradeQuiz();
});

restartButton.addEventListener("click", loadQuiz);

loadQuiz();
  </script>
</body>
</html>
